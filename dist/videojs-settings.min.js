!function(a,b){"use strict";function c(a){return"number"!=typeof a?a:a.toFixed(3)}var d,e,f,g=function(a,b){if(!b)return a;for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);return a},h=b.getComponent("Menu");b.registerComponent("PopupMenu",b.extend(h,{className:"vjs-rightclick-popup",popped:!1,constructor:function(a,c){h.call(this,a,c);var d=a;this.addClass(this.className),this.hide();var e=this,f=this.options_,g=b.mergeOptions({label:"Report playback issue"},f.report);this.addChild(new m(a,g));var i=b.mergeOptions({label:"Save logs to disk"});this.addChild(new n(a,i)),f.info&&(f.info=b.mergeOptions({label:"Technical info"},f.info),this.addChild(new o(a,f.info))),d.on("contextmenu",function(a){if(a.preventDefault(),e.popped)e.hide(),e.popped=!1;else{e.show();var b=a.offsetX,c=a.offsetY;e.el_.offsetWidth+b>d.el_.offsetWidth&&(b-=e.el_.offsetWidth),e.el_.offsetHeight+c>d.el_.offsetHeight&&(c-=e.el_.offsetHeight),e.el_.style.top=c+"px",e.el_.style.left=b+"px",e.popped=!0}}),d.on("click",function(a){return e.popped?(e.hide(),e.popped=!1,a.stopPropagation(),a.preventDefault(),!1):void 0}),this.children().forEach(function(a){a.on("click",function(a){e.hide(),e.popped=!1})})}}));var i=b.getComponent("MenuButton");b.registerComponent("SettingsButton",b.extend(i,{buttonText:"Settings",className:"vjs-settings-button",createItems:function(){this.addClass(this.className);var a=[],c=this.player_,d=this.options_;d.info&&(d.info=b.mergeOptions({label:"Technical info"},d.info),a.push(new o(c,d.info))),d.report&&(d.report=b.mergeOptions({label:"Report playback issue"},d.report),a.push(new m(c,d.report)));var e=d.quality,f=e&&e.sources?e.sources:null;if(f&&f.length>1){a.push(new p(c,{label:"Quality"}));for(var g=0;g<f.length;g+=1){var h=new q(c,f[g]);h.addClass("vjs-menu-indent"),a.push(h)}}return a},createMenu:function(){var a=this,b=(this.options_,i.prototype.createMenu.call(this));return b.addClass("vjs-menu-popup-on-click"),b.children().forEach(function(b){b.on("click",function(){a.handleClick()})}),b},handleClick:function(){this.buttonPressed_?this.unpressButton():this.pressButton()}}));var j=b.getComponent("Component");b.registerComponent("Overlay",b.extend(j,{createEl:function(a,b){var c=this.options_["class"];c=c?" "+c:"";var d=j.prototype,e=d.createEl.call(this,"div",g({className:"vjs-info-overlay"+c},b));return this.createContent(e),e},createContent:function(a){}}));var k=b.getComponent("Overlay");b.registerComponent("InfoOverlay",b.extend(k,{info_data:{duration:{units:"sec",title:"Duration",get:function(a){return c(a.duration())}},position:{units:"sec",title:"Position",get:function(a){return c(a.currentTime())}},buffered:{units:"sec",title:"Current buffer",get:function(a){var b=a.buffered(),d=a.currentTime();if(b&&b.length)for(var e=0;e<b.length;e+=1)if(b.start(e)<=d&&b.end(e)>=d)return c(b.end(e)-d);return"--"}},downloaded:{units:"sec",title:"Downloaded",get:function(a){var b=a.buffered(),d=0;if(b&&b.length)for(var e=0;e<b.length;e+=1)d+=b.end(e)-b.start(e);return c(d)}}},createContent:function(a){function b(a,b){b=b?g(b):b;var d=j.prototype;return d.createEl.call(c,a,b)}var c=this,e=this.player_,f=b("div",{className:"vjs-info-overlay-title",innerHTML:"Technical info"}),h=b("div",{className:"vjs-info-overlay-x",innerHTML:"❌"});h.addEventListener("click",function(a){d&&d.toggle()});var i,k,l=b("div",{className:"vjs-info-overlay-content"}),m=b("ul",{className:"vjs-info-overlay-list"});for(var n in this.info_data)i=b("li",{className:"vjs-info-overlay-list-item"}),k=this.info_data[n].title,this.info_data[n].units&&(k+=" ["+this.info_data[n].units+"]"),k+=": ",i.appendChild(b("strong",{innerHTML:k})),this.info_data[n].el=b("span"),i.appendChild(this.info_data[n].el),m.appendChild(i);l.appendChild(m),a.appendChild(f),a.appendChild(h),a.appendChild(l),this.update(),e.on("timeupdate",function(){c.update()}),setInterval(function(){c.update()},1e3)},update:function(){var a=this.player_,b=this.info_data;for(var c in b)b[c].el.innerHTML=b[c].get(a)},toggle:function(a){return a&&(this.last_caller=a),this.visible?(this.visible=!1,this.last_caller&&this.last_caller.selected(!1),void this.addClass("vjs-hidden")):(this.update(),this.visible=!0,void this.removeClass("vjs-hidden"))}})),b.registerComponent("NotifyOverlay",b.extend(k,{createContent:function(a){function b(a,b){b=b?g(b):b;var d=j.prototype;return d.createEl.call(c,a,b)}var c=this,d=b("div",{className:"vjs-notify-overlay-title",innerHTML:"Issue report sent."}),e=b("div",{className:"vjs-notify-overlay-content",innerHTML:"Thank you!"});a.appendChild(d),a.appendChild(e)},flash:function(){if(!this.visible){this.visible=!0,this.removeClass("vjs-hidden");var a=this;setTimeout(function(){a.addClass("vjs-notify-flash")},50),setTimeout(function(){a.visible=!1,a.removeClass("vjs-notify-flash"),a.addClass("vjs-hidden")},3500)}}}));var l=b.getComponent("MenuItem");b.registerComponent("ReportButton",b.extend(l,{constructor:function(a,b){l.call(this,a,b);var c=a;this.on("click",function(){c.trigger({type:"problem_report"}),e&&(e.flash(),this.selected(!1))})}}));var m=b.getComponent("ReportButton");b.registerComponent("LogButton",b.extend(l,{constructor:function(a,b){l.call(this,a,b);var c=a;this.on("click",function(){c.trigger({type:"save_logs"}),this.selected(!1)})}}));var n=b.getComponent("LogButton");b.registerComponent("InfoButton",b.extend(l,{constructor:function(a,b){l.call(this,a,b),this.on("click",function(){d&&d.toggle(this)})}}));var o=b.getComponent("InfoButton");b.registerComponent("MenuLabel",b.extend(j,{createEl:function(a,b){var c=j.prototype;return c.createEl.call(this,"li",g({className:"vjs-menu-item vjs-menu-label",innerHTML:this.options_.label},b))}}));var p=b.getComponent("MenuLabel");b.registerComponent("QualityButton",b.extend(l,{constructor:function(a,c){l.call(this,a,c),this.player_.one("play",b.bind(this,this.update)),this.player_.on("resolutionchange",b.bind(this,this.update)),c["default"]&&(this.player_.src(c.src),this.update())},handleClick:function(){var c=this.player_,d=this.options_;if("Html5"===c.techName_){var e=new a.CustomEvent("beforeresolutionchange");if(c.trigger(e,d),!e.defaultPrevented){if(c.cache_.src===d.src)return c.trigger("resolutionchange"),this;var f=c.currentTime(),g=c.paused();c.pause(),c.src(d.src),c.ready(function(){c.one("loadeddata",b.bind(this,function(){this.currentTime(f)})),c.trigger("resolutionchange"),g||(c.load(),c.play())})}}},update:function(){this.selected(this.player_.cache_.src===this.options_.src)}}));var q=b.getComponent("QualityButton");b.plugin("settings",function(a){var c=this;(void 0===a||a===!0)&&(a={info:!0,report:!0,quality:!1}),a=b.mergeOptions({},a),c.on("ready",function(){function g(a,c){try{b.utils.localStorage.setItem(a,c)}catch(d){}}function h(a){try{return b.utils.localStorage.getItem(a)}catch(c){return null}}function i(a,b){var c,d,e;for(a=a.filter(function(a){return a.src}),c=0;c<a.length;c+=1)a[c].label||(a[c].label=a[c].type),d||void 0===a[c]["default"]||(d=a[c]),b&&b==a[c].label&&void 0===a[c]["prevent-default"]&&(e=a[c]);for(c=0;c<a.length;c+=1)a[c]["default"]=e?a[c]===e:d?a[c]===d:!c;return a}if(a.quality){var j="vjs5_quality";a.quality===!0&&(a.quality={sources:c.options_.sources}),a.quality.sources=i(a.quality.sources,h(j)),c.on("resolutionchange",function(){for(var b=a.quality.sources,d=0;d<b.length;d++)if(c.currentSrc()==b[d].src){g(j,b[d].label);break}})}if((a.info||a.report||a.quality&&a.quality.sources&&a.quality.sources.length)&&c.controlBar.addChild("SettingsButton",b.mergeOptions({},a)),a.info&&(d=c.addChild("InfoOverlay",{}),d.addClass("vjs-hidden")),a.report&&(e=c.addChild("NotifyOverlay",{"class":"vjs-notify-overlay"}),e.addClass("vjs-hidden")),a.volume||void 0===a.volume){var k="vjs5_volume",l="vjs5_mute";c.ready(function(){var d=h(k),e=h(l),f=b.mergeOptions({level:1,mute:!1},a.volume);c.volume(null!=d?d:f.level),c.muted(null!=e?"true"===e:f.mute)}),c.on("volumechange",function(){g(k,c.volume()),g(l,c.muted())})}f=c.addChild("PopupMenu",b.mergeOptions({},a))})})}(window,window.videojs);